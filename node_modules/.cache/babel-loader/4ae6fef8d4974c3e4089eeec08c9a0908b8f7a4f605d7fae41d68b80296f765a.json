{"ast":null,"code":"/**\n * 13th month pay calculation utilities.\n * Formula: 13th Month Pay = Total Basic Salary Earned in Calendar Year รท 12\n * Prorated when employed for less than 12 months.\n */\n\n/**\n * Get days in a given month (1-indexed).\n */\nfunction getDaysInMonth(year, month) {\n  return new Date(year, month, 0).getDate();\n}\n\n/**\n * Compute total basic salary earned from startDate to endDate (inclusive),\n * at the given monthly basic salary. Prorates partial months by days worked.\n * @param {number} monthlyBasicSalary - Monthly basic salary\n * @param {Date} startDate - First day of employment in the year\n * @param {Date} endDate - Last day of employment in the year\n * @param {number} unpaidAbsenceDays - Optional unpaid absence days to deduct\n * @returns {{ totalBasicEarned: number, dailyRate: number, workingDays: number, unpaidDeduction: number }}\n */\nexport function computeTotalBasicEarned(monthlyBasicSalary, startDate, endDate, unpaidAbsenceDays = 0) {\n  if (!monthlyBasicSalary || monthlyBasicSalary <= 0) {\n    return {\n      totalBasicEarned: 0,\n      dailyRate: 0,\n      workingDays: 0,\n      unpaidDeduction: 0\n    };\n  }\n  const start = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());\n  const end = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());\n  if (end < start) {\n    return {\n      totalBasicEarned: 0,\n      dailyRate: 0,\n      workingDays: 0,\n      unpaidDeduction: 0\n    };\n  }\n  let totalEarned = 0;\n  const current = new Date(start.getFullYear(), start.getMonth(), 1);\n  const endMonth = new Date(end.getFullYear(), end.getMonth(), 1);\n  while (current <= endMonth) {\n    const year = current.getFullYear();\n    const month = current.getMonth();\n    const daysInMonth = getDaysInMonth(year, month + 1);\n    let firstWorked = 1;\n    let lastWorked = daysInMonth;\n    const monthStart = new Date(year, month, 1);\n    const monthEnd = new Date(year, month, daysInMonth);\n    if (monthStart < start) firstWorked = start.getDate();\n    if (monthEnd > end) lastWorked = end.getDate();\n    const daysWorked = Math.max(0, lastWorked - firstWorked + 1);\n    const fraction = daysWorked / daysInMonth;\n    totalEarned += monthlyBasicSalary * fraction;\n    current.setMonth(current.getMonth() + 1);\n  }\n  const totalDays = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;\n  const dailyRate = monthlyBasicSalary / 22;\n  const unpaidDeduction = Math.min(unpaidAbsenceDays * dailyRate, totalEarned);\n  const totalBasicEarned = Math.max(0, totalEarned - unpaidDeduction);\n  return {\n    totalBasicEarned,\n    dailyRate,\n    workingDays: totalDays,\n    unpaidDeduction\n  };\n}\n\n/**\n * Compute 13th month pay.\n * 13th Month Pay = Total Basic Salary Earned รท 12\n */\nexport function compute13thMonthPay(totalBasicEarned) {\n  return totalBasicEarned / 12;\n}","map":{"version":3,"names":["getDaysInMonth","year","month","Date","getDate","computeTotalBasicEarned","monthlyBasicSalary","startDate","endDate","unpaidAbsenceDays","totalBasicEarned","dailyRate","workingDays","unpaidDeduction","start","getFullYear","getMonth","end","totalEarned","current","endMonth","daysInMonth","firstWorked","lastWorked","monthStart","monthEnd","daysWorked","Math","max","fraction","setMonth","totalDays","ceil","min","compute13thMonthPay"],"sources":["D:/React/13monthpaycalc/src/utils/thirteenthMonthCalc.js"],"sourcesContent":["/**\n * 13th month pay calculation utilities.\n * Formula: 13th Month Pay = Total Basic Salary Earned in Calendar Year รท 12\n * Prorated when employed for less than 12 months.\n */\n\n/**\n * Get days in a given month (1-indexed).\n */\nfunction getDaysInMonth(year, month) {\n  return new Date(year, month, 0).getDate();\n}\n\n/**\n * Compute total basic salary earned from startDate to endDate (inclusive),\n * at the given monthly basic salary. Prorates partial months by days worked.\n * @param {number} monthlyBasicSalary - Monthly basic salary\n * @param {Date} startDate - First day of employment in the year\n * @param {Date} endDate - Last day of employment in the year\n * @param {number} unpaidAbsenceDays - Optional unpaid absence days to deduct\n * @returns {{ totalBasicEarned: number, dailyRate: number, workingDays: number, unpaidDeduction: number }}\n */\nexport function computeTotalBasicEarned(monthlyBasicSalary, startDate, endDate, unpaidAbsenceDays = 0) {\n  if (!monthlyBasicSalary || monthlyBasicSalary <= 0) {\n    return { totalBasicEarned: 0, dailyRate: 0, workingDays: 0, unpaidDeduction: 0 };\n  }\n\n  const start = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());\n  const end = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());\n\n  if (end < start) {\n    return { totalBasicEarned: 0, dailyRate: 0, workingDays: 0, unpaidDeduction: 0 };\n  }\n\n  let totalEarned = 0;\n  const current = new Date(start.getFullYear(), start.getMonth(), 1);\n  const endMonth = new Date(end.getFullYear(), end.getMonth(), 1);\n\n  while (current <= endMonth) {\n    const year = current.getFullYear();\n    const month = current.getMonth();\n    const daysInMonth = getDaysInMonth(year, month + 1);\n\n    let firstWorked = 1;\n    let lastWorked = daysInMonth;\n\n    const monthStart = new Date(year, month, 1);\n    const monthEnd = new Date(year, month, daysInMonth);\n\n    if (monthStart < start) firstWorked = start.getDate();\n    if (monthEnd > end) lastWorked = end.getDate();\n\n    const daysWorked = Math.max(0, lastWorked - firstWorked + 1);\n    const fraction = daysWorked / daysInMonth;\n    totalEarned += monthlyBasicSalary * fraction;\n\n    current.setMonth(current.getMonth() + 1);\n  }\n\n  const totalDays = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;\n  const dailyRate = monthlyBasicSalary / 22;\n  const unpaidDeduction = Math.min(unpaidAbsenceDays * dailyRate, totalEarned);\n  const totalBasicEarned = Math.max(0, totalEarned - unpaidDeduction);\n\n  return {\n    totalBasicEarned,\n    dailyRate,\n    workingDays: totalDays,\n    unpaidDeduction,\n  };\n}\n\n/**\n * Compute 13th month pay.\n * 13th Month Pay = Total Basic Salary Earned รท 12\n */\nexport function compute13thMonthPay(totalBasicEarned) {\n  return totalBasicEarned / 12;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}